{% extends 'base.html' %}
{% load bootstrap %}


{% block content %}
<style type="text/css">
  td {
    vertical-align:middle;
  }
  th {
    vertical-align:middle;
  }
  .form-signin .form-floating:focus-within {
    z-index: 2;
  }
  .patients {
	    padding: 15px;
  	}
  p {
    padding-left: 15px;
  }
  input {
    font-size: 30px;
  }

</style>

<div class="search-bar sm-2 mr-2">
  <form method="get">
    <div class="form-floating">
      <input class="form-control"  name="q" type="text" id="id_q" placeholder="recherche">
      <label for="id_q">Rechercher des patients (par n°IPP, prénom ou nom)</label>
    </div>
  </form>
</div>
{% if n_patients == 0 %}
<p>Aucun patients trouvés</p>
{% elif n_patients == 1 %}
<p>1 patient trouvé</p>
{% else %}
<p>{{n_patients}} patients trouvés</p>
{% endif %}


<div class="patients">
<br>
<div class="text-left">
<a href="{% url 'inclusion:create' %}" class="btn btn-outline-success">Inclure un patient</a>
</div>

{% if n_patients %}
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>

<table id="mytable" class="table table-bordred table-striped sortable">
  <thead>
    <th></th>
    <th>n°IPP</th>
    <th>Prénom</th>
    <th>Nom</th>
    <th>Auteur</th>
    <th>Date d'inclusion</th>
    <th>Date de modification</th>
  </thead>

<tbody>
  {% for file in patients %}
  <tr>
    <th><a class="btn btn-success" href="{% url 'inclusion:detail' file.slug %}">{{file.id}}</a> </th>
    <td>{{file.nipp}}</td>
    <td>{{file.first_name}}</td>
    <td>{{file.last_name}}</td>
    <td>{{file.author}}</td>
    <td>{{file.date_published}}</td>
    <td>{{file.date_updated}}</td>
  </tr>

  {% endfor %}
</tbody>

</table>
{% include 'inclusion/snippets/patient_file_pagination.html' with patients=patients %}

{% endif %}


<div>

<script type="text/javascript">
	document.getElementById("id_q").value = "{{query}}"
</script>

{% endblock content %}
